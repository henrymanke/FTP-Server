services:
  nginx:
    image: nginx:latest
    container_name: nginx-server
    ports:
      - "8777:80"   # HTTP-Anfragen auf Port 8777
      - "8443:443"  # HTTPS-Anfragen auf Port 8443
    volumes:
      - ./ftpdata/storage_user/static:/usr/share/nginx/html/static  # Mount des statischen Dateiverzeichnisses
      - ./ftpdata/storage_user/media:/usr/share/nginx/html/media    # Mount des Medien-Dateiverzeichnisses
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./fullchain.pem:/etc/nginx/certs/fullchain.pem
      - ./privkey.pem:/etc/nginx/certs/privkey.pem 
    restart: unless-stopped

  vsftpd:
    image: fauria/vsftpd
    container_name: vsftpd-server
    ports:
      - "20:20"
      - "21:21"
      - "21100-21110:21100-21110"
    environment:
      - FTP_USER=${FTP_USER}
      - FTP_PASS=${FTP_PASS}
      - FILE_OPEN_MODE=0755
      - LOCAL_UMASK=022
    volumes:
      - ./ftpdata:/home/vsftpd
    restart: unless-stopped
